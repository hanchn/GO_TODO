# Á¨¨8Á´†ÔºöJavaScript‰∫§‰∫íÈÄªËæë

Êú¨Á´†Â∞ÜËØ¶ÁªÜ‰ªãÁªçÂ¶Ç‰Ωï‰ΩøÁî®Áé∞‰ª£JavaScriptÂºÄÂèëÂâçÁ´Ø‰∫§‰∫íÂäüËÉΩÔºåÂåÖÊã¨APIË∞ÉÁî®„ÄÅÊï∞ÊçÆÂ§ÑÁêÜ„ÄÅÁî®Êà∑ÁïåÈù¢‰∫§‰∫íÂíåÈîôËØØÂ§ÑÁêÜ„ÄÇ

## 8.1 JavaScriptÊäÄÊúØÊ†à

### ÊäÄÊúØÈÄâÊã©

Êàë‰ª¨‰ΩøÁî®ÁöÑJavaScriptÊäÄÊúØÂåÖÊã¨Ôºö

- üöÄ **ES6+**ÔºöÁé∞‰ª£JavaScriptËØ≠Ê≥ïÂíåÁâπÊÄß
- üåê **Fetch API**ÔºöÁé∞‰ª£HTTPËØ∑Ê±ÇÂ§ÑÁêÜ
- üì¶ **Ê®°ÂùóÂåñ**ÔºöES6Ê®°ÂùóÁ≥ªÁªü
- üéØ **‰∫ã‰ª∂È©±Âä®**ÔºöDOM‰∫ã‰ª∂Â§ÑÁêÜ
- üìä **Êï∞ÊçÆÁªëÂÆö**ÔºöÂèåÂêëÊï∞ÊçÆÁªëÂÆö
- üîÑ **ÂºÇÊ≠•Â§ÑÁêÜ**ÔºöPromiseÂíåasync/await
- üõ°Ô∏è **ÈîôËØØÂ§ÑÁêÜ**ÔºöÁªü‰∏ÄÈîôËØØÂ§ÑÁêÜÊú∫Âà∂
- üì± **ÂìçÂ∫îÂºè**ÔºöÁßªÂä®Á´Ø‰∫§‰∫í‰ºòÂåñ

### È°πÁõÆÁªìÊûÑ

```
static/js/
‚îú‚îÄ‚îÄ app.js              # ‰∏ªÂ∫îÁî®Êñá‰ª∂
‚îú‚îÄ‚îÄ config.js           # ÈÖçÁΩÆÊñá‰ª∂
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ client.js       # APIÂÆ¢Êà∑Á´Ø
‚îÇ   ‚îú‚îÄ‚îÄ student.js      # Â≠¶ÁîüAPI
‚îÇ   ‚îî‚îÄ‚îÄ auth.js         # ËÆ§ËØÅAPI
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ student.js      # Â≠¶ÁîüÁªÑ‰ª∂
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.js    # ‰ª™Ë°®ÊùøÁªÑ‰ª∂
‚îÇ   ‚îú‚îÄ‚îÄ modal.js        # Ê®°ÊÄÅÊ°ÜÁªÑ‰ª∂
‚îÇ   ‚îî‚îÄ‚îÄ table.js        # Ë°®Ê†ºÁªÑ‰ª∂
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ helpers.js      # Â∑•ÂÖ∑ÂáΩÊï∞
‚îÇ   ‚îú‚îÄ‚îÄ validation.js   # È™åËØÅÂ∑•ÂÖ∑
‚îÇ   ‚îú‚îÄ‚îÄ storage.js      # Â≠òÂÇ®Â∑•ÂÖ∑
‚îÇ   ‚îî‚îÄ‚îÄ dom.js          # DOMÊìç‰ΩúÂ∑•ÂÖ∑
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ notification.js # ÈÄöÁü•ÊúçÂä°
    ‚îú‚îÄ‚îÄ cache.js        # ÁºìÂ≠òÊúçÂä°
    ‚îî‚îÄ‚îÄ analytics.js    # ÂàÜÊûêÊúçÂä°
```

## 8.2 Ê†∏ÂøÉÂ∫îÁî®Ê°ÜÊû∂

### ‰∏ªÂ∫îÁî®Êñá‰ª∂

**Êñá‰ª∂Ë∑ØÂæÑÔºö** `static/js/app.js`

```javascript
/**
 * Â≠¶ÁîüÁÆ°ÁêÜÁ≥ªÁªü‰∏ªÂ∫îÁî®
 * @author Your Name
 * @version 1.0.0
 */

// Â∫îÁî®ÈÖçÁΩÆ
const App = {
    config: {
        apiBaseUrl: '/api/v1',
        version: '1.0.0',
        debug: true,
        pageSize: 10,
        maxFileSize: 2 * 1024 * 1024, // 2MB
        supportedImageTypes: ['image/jpeg', 'image/png', 'image/gif']
    },
    
    // Â∫îÁî®Áä∂ÊÄÅ
    state: {
        currentUser: null,
        currentPage: 1,
        totalPages: 0,
        selectedStudents: new Set(),
        filters: {},
        sortBy: 'created_at',
        sortOrder: 'desc'
    },
    
    // ÁºìÂ≠ò
    cache: new Map(),
    
    // ‰∫ã‰ª∂ÊÄªÁ∫ø
    events: new EventTarget(),
    
    // ÂàùÂßãÂåñÂ∫îÁî®
    async init() {
        try {
            this.log('Â∫îÁî®ÂàùÂßãÂåñÂºÄÂßã...');
            
            // ÂàùÂßãÂåñÁªÑ‰ª∂
            await this.initComponents();
            
            // ÁªëÂÆöÂÖ®Â±Ä‰∫ã‰ª∂
            this.bindGlobalEvents();
            
            // ÂàùÂßãÂåñË∑ØÁî±
            this.initRouter();
            
            // Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØ
            await this.loadUserInfo();
            
            // ÂàùÂßãÂåñÈÄöÁü•Á≥ªÁªü
            NotificationService.init();
            
            this.log('Â∫îÁî®ÂàùÂßãÂåñÂÆåÊàê');
            
            // Ëß¶ÂèëÂ∫îÁî®Â∞±Áª™‰∫ã‰ª∂
            this.events.dispatchEvent(new CustomEvent('app:ready'));
            
        } catch (error) {
            this.error('Â∫îÁî®ÂàùÂßãÂåñÂ§±Ë¥•:', error);
            this.showError('Â∫îÁî®ÂàùÂßãÂåñÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
        }
    },
    
    // ÂàùÂßãÂåñÁªÑ‰ª∂
    async initComponents() {
        const components = [
            'StudentManager',
            'Dashboard',
            'ModalManager',
            'TableManager'
        ];
        
        for (const componentName of components) {
            if (window[componentName] && typeof window[componentName].init === 'function') {
                await window[componentName].init();
                this.log(`ÁªÑ‰ª∂ ${componentName} ÂàùÂßãÂåñÂÆåÊàê`);
            }
        }
    },
    
    // ÁªëÂÆöÂÖ®Â±Ä‰∫ã‰ª∂
    bindGlobalEvents() {
        // È°µÈù¢Âä†ËΩΩÂÆåÊàê
        document.addEventListener('DOMContentLoaded', () => {
            this.hideLoadingScreen();
        });
        
        // ÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜ
        window.addEventListener('error', (event) => {
            this.error('ÂÖ®Â±ÄÈîôËØØ:', event.error);
        });
        
        // Êú™Â§ÑÁêÜÁöÑPromiseÊãíÁªù
        window.addEventListener('unhandledrejection', (event) => {
            this.error('Êú™Â§ÑÁêÜÁöÑPromiseÊãíÁªù:', event.reason);
            event.preventDefault();
        });
        
        // ÁΩëÁªúÁä∂ÊÄÅÂèòÂåñ
        window.addEventListener('online', () => {
            this.showSuccess('ÁΩëÁªúËøûÊé•Â∑≤ÊÅ¢Â§ç');
        });
        
        window.addEventListener('offline', () => {
            this.showWarning('ÁΩëÁªúËøûÊé•Â∑≤Êñ≠ÂºÄ');
        });
        
        // ÈîÆÁõòÂø´Êç∑ÈîÆ
        document.addEventListener('keydown', (event) => {
            this.handleKeyboardShortcuts(event);
        });
        
        // È°µÈù¢ÂèØËßÅÊÄßÂèòÂåñ
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                this.events.dispatchEvent(new CustomEvent('app:focus'));
            } else {
                this.events.dispatchEvent(new CustomEvent('app:blur'));
            }
        });
    },
    
    // Â§ÑÁêÜÈîÆÁõòÂø´Êç∑ÈîÆ
    handleKeyboardShortcuts(event) {
        // Ctrl/Cmd + K: ÂÖ®Â±ÄÊêúÁ¥¢
        if ((event.ctrlKey || event.metaKey) && event.key === 'k') {
            event.preventDefault();
            const searchInput = document.getElementById('global-search');
            if (searchInput) {
                searchInput.focus();
            }
        }
        
        // Ctrl/Cmd + N: Êñ∞Âª∫Â≠¶Áîü
        if ((event.ctrlKey || event.metaKey) && event.key === 'n') {
            event.preventDefault();
            if (window.StudentManager) {
                StudentManager.showAddModal();
            }
        }
        
        // ESC: ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        if (event.key === 'Escape') {
            const openModal = document.querySelector('.modal.show');
            if (openModal) {
                const modal = bootstrap.Modal.getInstance(openModal);
                if (modal) {
                    modal.hide();
                }
            }
        }
    },
    
    // ÂàùÂßãÂåñË∑ØÁî±
    initRouter() {
        // ÁÆÄÂçïÁöÑË∑ØÁî±Á≥ªÁªü
        const path = window.location.pathname;
        const routes = {
            '/': 'dashboard',
            '/students': 'students',
            '/dashboard': 'dashboard'
        };
        
        const currentRoute = routes[path] || 'dashboard';
        this.state.currentRoute = currentRoute;
        
        // Êõ¥Êñ∞ÂØºËà™Áä∂ÊÄÅ
        this.updateNavigation(currentRoute);
    },
    
    // Êõ¥Êñ∞ÂØºËà™Áä∂ÊÄÅ
    updateNavigation(activeRoute) {
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        
        const activeLink = document.querySelector(`[href="/${activeRoute}"]`);
        if (activeLink) {
            activeLink.classList.add('active');
        }
    },
    
    // Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØ
    async loadUserInfo() {
        try {
            // ËøôÈáåÂèØ‰ª•‰ªéAPIÂä†ËΩΩÁî®Êà∑‰ø°ÊÅØ
            this.state.currentUser = {
                id: 1,
                name: 'ÁÆ°ÁêÜÂëò',
                email: 'admin@example.com',
                avatar: '/static/images/avatar.png'
            };
        } catch (error) {
            this.error('Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•:', error);
        }
    },
    
    // ÈöêËóèÂä†ËΩΩÂ±èÂπï
    hideLoadingScreen() {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
            loadingScreen.style.opacity = '0';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 300);
        }
    },
    
    // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
    showSuccess(message, options = {}) {
        NotificationService.show(message, 'success', options);
    },
    
    // ÊòæÁ§∫ÈîôËØØÊ∂àÊÅØ
    showError(message, options = {}) {
        NotificationService.show(message, 'error', options);
    },
    
    // ÊòæÁ§∫Ë≠¶ÂëäÊ∂àÊÅØ
    showWarning(message, options = {}) {
        NotificationService.show(message, 'warning', options);
    },
    
    // ÊòæÁ§∫‰ø°ÊÅØÊ∂àÊÅØ
    showInfo(message, options = {}) {
        NotificationService.show(message, 'info', options);
    },
    
    // Êó•ÂøóËÆ∞ÂΩï
    log(...args) {
        if (this.config.debug) {
            console.log('[App]', ...args);
        }
    },
    
    // ÈîôËØØËÆ∞ÂΩï
    error(...args) {
        console.error('[App Error]', ...args);
        
        // ÂèëÈÄÅÈîôËØØÂà∞ÂàÜÊûêÊúçÂä°
        if (window.AnalyticsService) {
            AnalyticsService.trackError(args[1] || args[0]);
        }
    },
    
    // Ê†ºÂºèÂåñÊó•Êúü
    formatDate(date, format = 'YYYY-MM-DD HH:mm:ss') {
        if (!date) return '-';
        
        const d = new Date(date);
        const year = d.getFullYear();
        const month = String(d.getMonth() + 1).padStart(2, '0');
        const day = String(d.getDate()).padStart(2, '0');
        const hours = String(d.getHours()).padStart(2, '0');
        const minutes = String(d.getMinutes()).padStart(2, '0');
        const seconds = String(d.getSeconds()).padStart(2, '0');
        
        return format
            .replace('YYYY', year)
            .replace('MM', month)
            .replace('DD', day)
            .replace('HH', hours)
            .replace('mm', minutes)
            .replace('ss', seconds);
    },
    
    // Èò≤ÊäñÂáΩÊï∞
    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    },
    
    // ËäÇÊµÅÂáΩÊï∞
    throttle(func, limit) {
        let inThrottle;
        return function() {
            const args = arguments;
            const context = this;
            if (!inThrottle) {
                func.apply(context, args);
                inThrottle = true;
                setTimeout(() => inThrottle = false, limit);
            }
        };
    }
};

// ÂÖ®Â±ÄÊö¥Èú≤AppÂØπË±°
window.App = App;

// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñÂ∫îÁî®
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => App.init());
} else {
    App.init();
}
```

### APIÂÆ¢Êà∑Á´Ø

**Êñá‰ª∂Ë∑ØÂæÑÔºö** `static/js/api/client.js`

```javascript
/**
 * APIÂÆ¢Êà∑Á´Ø
 * Áªü‰∏ÄÂ§ÑÁêÜHTTPËØ∑Ê±ÇÂíåÂìçÂ∫î
 */

class APIClient {
    constructor(baseURL = '/api/v1') {
        this.baseURL = baseURL;
        this.defaultHeaders = {
            'Content-Type': 'application/json',
            'X-Requested-With': 'XMLHttpRequest'
        };
        this.interceptors = {
            request: [],
            response: []
        };
        
        // Ê∑ªÂä†ÈªòËÆ§Êã¶Êà™Âô®
        this.addDefaultInterceptors();
    }
    
    // Ê∑ªÂä†ÈªòËÆ§Êã¶Êà™Âô®
    addDefaultInterceptors() {
        // ËØ∑Ê±ÇÊã¶Êà™Âô®ÔºöÊ∑ªÂä†ËÆ§ËØÅÂ§¥
        this.interceptors.request.push((config) => {
            const token = localStorage.getItem('auth_token');
            if (token) {
                config.headers['Authorization'] = `Bearer ${token}`;
            }
            return config;
        });
        
        // ËØ∑Ê±ÇÊã¶Êà™Âô®ÔºöÊ∑ªÂä†ËØ∑Ê±ÇID
        this.interceptors.request.push((config) => {
            config.headers['X-Request-ID'] = this.generateRequestId();
            return config;
        });
        
        // ÂìçÂ∫îÊã¶Êà™Âô®ÔºöÂ§ÑÁêÜËÆ§ËØÅÈîôËØØ
        this.interceptors.response.push((response) => {
            if (response.status === 401) {
                this.handleAuthError();
            }
            return response;
        });
        
        // ÂìçÂ∫îÊã¶Êà™Âô®ÔºöÂ§ÑÁêÜÁΩëÁªúÈîôËØØ
        this.interceptors.response.push((response) => {
            if (!response.ok && response.status >= 500) {
                App.showError('ÊúçÂä°Âô®ÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØï');
            }
            return response;
        });
    }
    
    // ÁîüÊàêËØ∑Ê±ÇID
    generateRequestId() {
        return 'req_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }
    
    // Â§ÑÁêÜËÆ§ËØÅÈîôËØØ
    handleAuthError() {
        localStorage.removeItem('auth_token');
        App.showError('ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï');
        // ÈáçÂÆöÂêëÂà∞ÁôªÂΩïÈ°µÈù¢
        setTimeout(() => {
            window.location.href = '/login';
        }, 2000);
    }
    
    // Ê∑ªÂä†ËØ∑Ê±ÇÊã¶Êà™Âô®
    addRequestInterceptor(interceptor) {
        this.interceptors.request.push(interceptor);
    }
    
    // Ê∑ªÂä†ÂìçÂ∫îÊã¶Êà™Âô®
    addResponseInterceptor(interceptor) {
        this.interceptors.response.push(interceptor);
    }
    
    // Â∫îÁî®ËØ∑Ê±ÇÊã¶Êà™Âô®
    applyRequestInterceptors(config) {
        return this.interceptors.request.reduce((config, interceptor) => {
            return interceptor(config) || config;
        }, config);
    }
    
    // Â∫îÁî®ÂìçÂ∫îÊã¶Êà™Âô®
    applyResponseInterceptors(response) {
        return this.interceptors.response.reduce((response, interceptor) => {
            return interceptor(response) || response;
        }, response);
    }
    
    // ÊûÑÂª∫ÂÆåÊï¥URL
    buildURL(endpoint) {
        if (endpoint.startsWith('http')) {
            return endpoint;
        }
        return `${this.baseURL}${endpoint.startsWith('/') ? '' : '/'}${endpoint}`;
    }
    
    // ÈÄöÁî®ËØ∑Ê±ÇÊñπÊ≥ï
    async request(endpoint, options = {}) {
        const url = this.buildURL(endpoint);
        
        // ÂáÜÂ§áËØ∑Ê±ÇÈÖçÁΩÆ
        const config = {
            method: 'GET',
            headers: { ...this.defaultHeaders },
            ...options
        };
        
        // ÂêàÂπ∂Ëá™ÂÆö‰πâÂ§¥ÈÉ®
        if (options.headers) {
            config.headers = { ...config.headers, ...options.headers };
        }
        
        // Â∫îÁî®ËØ∑Ê±ÇÊã¶Êà™Âô®
        const finalConfig = this.applyRequestInterceptors(config);
        
        try {
            App.log(`APIËØ∑Ê±Ç: ${finalConfig.method} ${url}`);
            
            // ÂèëÈÄÅËØ∑Ê±Ç
            const response = await fetch(url, finalConfig);
            
            // Â∫îÁî®ÂìçÂ∫îÊã¶Êà™Âô®
            const finalResponse = this.applyResponseInterceptors(response);
            
            // Ëß£ÊûêÂìçÂ∫î
            const data = await this.parseResponse(finalResponse);
            
            App.log(`APIÂìçÂ∫î: ${finalResponse.status}`, data);
            
            return {
                data,
                status: finalResponse.status,
                headers: finalResponse.headers,
                ok: finalResponse.ok
            };
            
        } catch (error) {
            App.error('APIËØ∑Ê±ÇÂ§±Ë¥•:', error);
            
            // ÁΩëÁªúÈîôËØØÂ§ÑÁêÜ
            if (error.name === 'TypeError' && error.message.includes('fetch')) {
                throw new Error('ÁΩëÁªúËøûÊé•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËÆæÁΩÆ');
            }
            
            throw error;
        }
    }
    
    // Ëß£ÊûêÂìçÂ∫î
    async parseResponse(response) {
        const contentType = response.headers.get('content-type');
        
        if (contentType && contentType.includes('application/json')) {
            return await response.json();
        }
        
        if (contentType && contentType.includes('text/')) {
            return await response.text();
        }
        
        return await response.blob();
    }
    
    // GETËØ∑Ê±Ç
    async get(endpoint, params = {}) {
        const url = new URL(this.buildURL(endpoint));
        
        // Ê∑ªÂä†Êü•ËØ¢ÂèÇÊï∞
        Object.keys(params).forEach(key => {
            if (params[key] !== undefined && params[key] !== null) {
                url.searchParams.append(key, params[key]);
            }
        });
        
        return this.request(url.toString());
    }
    
    // POSTËØ∑Ê±Ç
    async post(endpoint, data = {}) {
        return this.request(endpoint, {
            method: 'POST',
            body: JSON.stringify(data)
        });
    }
    
    // PUTËØ∑Ê±Ç
    async put(endpoint, data = {}) {
        return this.request(endpoint, {
            method: 'PUT',
            body: JSON.stringify(data)
        });
    }
    
    // DELETEËØ∑Ê±Ç
    async delete(endpoint) {
        return this.request(endpoint, {
            method: 'DELETE'
        });
    }
    
    // PATCHËØ∑Ê±Ç
    async patch(endpoint, data = {}) {
        return this.request(endpoint, {
            method: 'PATCH',
            body: JSON.stringify(data)
        });
    }
    
    // Êñá‰ª∂‰∏ä‰º†
    async upload(endpoint, file, onProgress = null) {
        const formData = new FormData();
        formData.append('file', file);
        
        const config = {
            method: 'POST',
            body: formData,
            headers: {} // ‰∏çËÆæÁΩÆContent-TypeÔºåËÆ©ÊµèËßàÂô®Ëá™Âä®ËÆæÁΩÆ
        };
        
        // Â¶ÇÊûúÈúÄË¶ÅËøõÂ∫¶ÂõûË∞É
        if (onProgress && typeof onProgress === 'function') {
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest();
                
                xhr.upload.addEventListener('progress', (event) => {
                    if (event.lengthComputable) {
                        const percentComplete = (event.loaded / event.total) * 100;
                        onProgress(percentComplete);
                    }
                });
                
                xhr.addEventListener('load', () => {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        resolve(JSON.parse(xhr.responseText));
                    } else {
                        reject(new Error(`‰∏ä‰º†Â§±Ë¥•: ${xhr.statusText}`));
                    }
                });
                
                xhr.addEventListener('error', () => {
                    reject(new Error('‰∏ä‰º†Â§±Ë¥•'));
                });
                
                xhr.open('POST', this.buildURL(endpoint));
                
                // Ê∑ªÂä†ËÆ§ËØÅÂ§¥
                const token = localStorage.getItem('auth_token');
                if (token) {
                    xhr.setRequestHeader('Authorization', `Bearer ${token}`);
                }
                
                xhr.send(formData);
            });
        }
        
        return this.request(endpoint, config);
    }
    
    // ‰∏ãËΩΩÊñá‰ª∂
    async download(endpoint, filename = null) {
        try {
            const response = await this.request(endpoint, {
                headers: {
                    'Accept': 'application/octet-stream'
                }
            });
            
            if (!response.ok) {
                throw new Error('‰∏ãËΩΩÂ§±Ë¥•');
            }
            
            // ÂàõÂª∫‰∏ãËΩΩÈìæÊé•
            const blob = response.data;
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename || 'download';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
        } catch (error) {
            App.error('‰∏ãËΩΩÂ§±Ë¥•:', error);
            throw error;
        }
    }
}

// ÂàõÂª∫ÂÖ®Â±ÄAPIÂÆ¢Êà∑Á´ØÂÆû‰æã
window.apiClient = new APIClient();
```

### Â≠¶ÁîüAPIÊúçÂä°

**Êñá‰ª∂Ë∑ØÂæÑÔºö** `static/js/api/student.js`

```javascript
/**
 * Â≠¶ÁîüAPIÊúçÂä°
 * Â§ÑÁêÜÊâÄÊúâÂ≠¶ÁîüÁõ∏ÂÖ≥ÁöÑAPIË∞ÉÁî®
 */

class StudentAPI {
    constructor(client) {
        this.client = client;
        this.endpoint = '/students';
    }
    
    // Ëé∑ÂèñÊâÄÊúâÂ≠¶Áîü
    async getAll(params = {}) {
        try {
            const response = await this.client.get(this.endpoint, params);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'Ëé∑ÂèñÂ≠¶ÁîüÂàóË°®Â§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('Ëé∑ÂèñÂ≠¶ÁîüÂàóË°®Â§±Ë¥•:', error);
            throw error;
        }
    }
    
    // Ê†πÊçÆIDËé∑ÂèñÂ≠¶Áîü
    async getById(id) {
        try {
            const response = await this.client.get(`${this.endpoint}/${id}`);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'Ëé∑ÂèñÂ≠¶Áîü‰ø°ÊÅØÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('Ëé∑ÂèñÂ≠¶Áîü‰ø°ÊÅØÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // ÂàõÂª∫Â≠¶Áîü
    async create(studentData) {
        try {
            // Êï∞ÊçÆÈ™åËØÅ
            this.validateStudentData(studentData);
            
            const response = await this.client.post(this.endpoint, studentData);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'ÂàõÂª∫Â≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('ÂàõÂª∫Â≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // Êõ¥Êñ∞Â≠¶Áîü
    async update(id, studentData) {
        try {
            // Êï∞ÊçÆÈ™åËØÅ
            this.validateStudentData(studentData, false);
            
            const response = await this.client.put(`${this.endpoint}/${id}`, studentData);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'Êõ¥Êñ∞Â≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('Êõ¥Êñ∞Â≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // Âà†Èô§Â≠¶Áîü
    async delete(id) {
        try {
            const response = await this.client.delete(`${this.endpoint}/${id}`);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'Âà†Èô§Â≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('Âà†Èô§Â≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // ÊêúÁ¥¢Â≠¶Áîü
    async search(query, filters = {}) {
        try {
            const params = {
                ...filters
            };
            
            // Ê∑ªÂä†ÊêúÁ¥¢ÂÖ≥ÈîÆËØç
            if (query && query.trim()) {
                params.name = query.trim();
            }
            
            const response = await this.client.get(`${this.endpoint}/search`, params);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'ÊêúÁ¥¢Â≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('ÊêúÁ¥¢Â≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // ÊâπÈáèÂàõÂª∫Â≠¶Áîü
    async batchCreate(studentsData) {
        try {
            // È™åËØÅÊâπÈáèÊï∞ÊçÆ
            if (!Array.isArray(studentsData) || studentsData.length === 0) {
                throw new Error('Â≠¶ÁîüÊï∞ÊçÆ‰∏çËÉΩ‰∏∫Á©∫');
            }
            
            if (studentsData.length > 100) {
                throw new Error('ÊâπÈáèÂàõÂª∫Êï∞Èáè‰∏çËÉΩË∂ÖËøá100‰∏™');
            }
            
            // È™åËØÅÊØè‰∏™Â≠¶ÁîüÊï∞ÊçÆ
            studentsData.forEach((student, index) => {
                try {
                    this.validateStudentData(student);
                } catch (error) {
                    throw new Error(`Á¨¨${index + 1}‰∏™Â≠¶ÁîüÊï∞ÊçÆÈ™åËØÅÂ§±Ë¥•: ${error.message}`);
                }
            });
            
            const response = await this.client.post(`${this.endpoint}/batch`, studentsData);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'ÊâπÈáèÂàõÂª∫Â≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('ÊâπÈáèÂàõÂª∫Â≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // ÊâπÈáèÂà†Èô§Â≠¶Áîü
    async batchDelete(ids) {
        try {
            if (!Array.isArray(ids) || ids.length === 0) {
                throw new Error('ËØ∑ÈÄâÊã©Ë¶ÅÂà†Èô§ÁöÑÂ≠¶Áîü');
            }
            
            if (ids.length > 100) {
                throw new Error('ÊâπÈáèÂà†Èô§Êï∞Èáè‰∏çËÉΩË∂ÖËøá100‰∏™');
            }
            
            const response = await this.client.request(`${this.endpoint}/batch`, {
                method: 'DELETE',
                body: JSON.stringify(ids)
            });
            
            if (!response.ok) {
                throw new Error(response.data.message || 'ÊâπÈáèÂà†Èô§Â≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('ÊâπÈáèÂà†Èô§Â≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // ÊøÄÊ¥ªÂ≠¶Áîü
    async activate(id) {
        try {
            const response = await this.client.put(`${this.endpoint}/${id}/activate`);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'ÊøÄÊ¥ªÂ≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('ÊøÄÊ¥ªÂ≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // Á¶ÅÁî®Â≠¶Áîü
    async deactivate(id) {
        try {
            const response = await this.client.put(`${this.endpoint}/${id}/deactivate`);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'Á¶ÅÁî®Â≠¶ÁîüÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('Á¶ÅÁî®Â≠¶ÁîüÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // Ëé∑ÂèñÁªüËÆ°‰ø°ÊÅØ
    async getStatistics() {
        try {
            const response = await this.client.get(`${this.endpoint}/statistics`);
            
            if (!response.ok) {
                throw new Error(response.data.message || 'Ëé∑ÂèñÁªüËÆ°‰ø°ÊÅØÂ§±Ë¥•');
            }
            
            return response.data;
        } catch (error) {
            App.error('Ëé∑ÂèñÁªüËÆ°‰ø°ÊÅØÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // ÂØºÂÖ•Â≠¶ÁîüÊï∞ÊçÆ
    async import(file, onProgress = null) {
        try {
            // È™åËØÅÊñá‰ª∂
            this.validateImportFile(file);
            
            const response = await this.client.upload(`${this.endpoint}/import`, file, onProgress);
            
            if (!response.success) {
                throw new Error(response.message || 'ÂØºÂÖ•Â§±Ë¥•');
            }
            
            return response;
        } catch (error) {
            App.error('ÂØºÂÖ•Â≠¶ÁîüÊï∞ÊçÆÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // ÂØºÂá∫Â≠¶ÁîüÊï∞ÊçÆ
    async export(format = 'xlsx', filters = {}) {
        try {
            const params = {
                format,
                ...filters
            };
            
            const filename = `students_${new Date().toISOString().split('T')[0]}.${format}`;
            
            await this.client.download(`${this.endpoint}/export`, filename);
            
        } catch (error) {
            App.error('ÂØºÂá∫Â≠¶ÁîüÊï∞ÊçÆÂ§±Ë¥•:', error);
            throw error;
        }
    }
    
    // È™åËØÅÂ≠¶ÁîüÊï∞ÊçÆ
    validateStudentData(data, isCreate = true) {
        const errors = [];
        
        // ÂøÖÂ°´Â≠óÊÆµÈ™åËØÅÔºà‰ªÖÂàõÂª∫Êó∂Ôºâ
        if (isCreate) {
            if (!data.name || !data.name.trim()) {
                errors.push('ÂßìÂêç‰∏çËÉΩ‰∏∫Á©∫');
            }
            
            if (!data.email || !data.email.trim()) {
                errors.push('ÈÇÆÁÆ±‰∏çËÉΩ‰∏∫Á©∫');
            }
            
            if (!data.major || !data.major.trim()) {
                errors.push('‰∏ì‰∏ö‰∏çËÉΩ‰∏∫Á©∫');
            }
            
            if (!data.grade || !data.grade.trim()) {
                errors.push('Âπ¥Á∫ß‰∏çËÉΩ‰∏∫Á©∫');
            }
        }
        
        // Êï∞ÊçÆÊ†ºÂºèÈ™åËØÅ
        if (data.name && data.name.length > 50) {
            errors.push('ÂßìÂêçÈïøÂ∫¶‰∏çËÉΩË∂ÖËøá50‰∏™Â≠óÁ¨¶');
        }
        
        if (data.email && !this.isValidEmail(data.email)) {
            errors.push('ÈÇÆÁÆ±Ê†ºÂºè‰∏çÊ≠£Á°Æ');
        }
        
        if (data.age && (data.age < 16 || data.age > 30)) {
            errors.push('Âπ¥ÈæÑÂøÖÈ°ªÂú®16-30‰πãÈó¥');
        }
        
        if (data.phone && !this.isValidPhone(data.phone)) {
            errors.push('ÊâãÊú∫Âè∑Á†ÅÊ†ºÂºè‰∏çÊ≠£Á°Æ');
        }
        
        if (errors.length > 0) {
            throw new Error(errors.join(', '));
        }
    }
    
    // È™åËØÅÂØºÂÖ•Êñá‰ª∂
    validateImportFile(file) {
        if (!file) {
            throw new Error('ËØ∑ÈÄâÊã©Ë¶ÅÂØºÂÖ•ÁöÑÊñá‰ª∂');
        }
        
        const allowedTypes = [
            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
            'application/vnd.ms-excel',
            'text/csv'
        ];
        
        if (!allowedTypes.includes(file.type)) {
            throw new Error('Êñá‰ª∂Ê†ºÂºè‰∏çÊîØÊåÅÔºåËØ∑ÈÄâÊã©ExcelÊàñCSVÊñá‰ª∂');
        }
        
        const maxSize = 10 * 1024 * 1024; // 10MB
        if (file.size > maxSize) {
            throw new Error('Êñá‰ª∂Â§ßÂ∞è‰∏çËÉΩË∂ÖËøá10MB');
        }
    }
    
    // È™åËØÅÈÇÆÁÆ±Ê†ºÂºè
    isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    // È™åËØÅÊâãÊú∫Âè∑Á†ÅÊ†ºÂºè
    isValidPhone(phone) {
        const phoneRegex = /^1[3-9]\d{9}$/;
        return phoneRegex.test(phone);
    }
}

// ÂàõÂª∫ÂÖ®Â±ÄÂ≠¶ÁîüAPIÂÆû‰æã
window.studentAPI = new StudentAPI(window.apiClient);
```

## 8.3 Â≠¶ÁîüÁÆ°ÁêÜÁªÑ‰ª∂

### Â≠¶ÁîüÁÆ°ÁêÜÂô®

**Êñá‰ª∂Ë∑ØÂæÑÔºö** `static/js/components/student.js`

```javascript
/**
 * Â≠¶ÁîüÁÆ°ÁêÜÁªÑ‰ª∂
 * Â§ÑÁêÜÂ≠¶ÁîüÂàóË°®„ÄÅÊ∑ªÂä†„ÄÅÁºñËæë„ÄÅÂà†Èô§Á≠âÂäüËÉΩ
 */

class StudentManager {
    constructor() {
        this.students = [];
        this.filteredStudents = [];
        this.currentPage = 1;
        this.pageSize = 10;
        this.totalCount = 0;
        this.sortBy = 'created_at';
        this.sortOrder = 'desc';
        this.filters = {};
        this.selectedStudents = new Set();
        
        // DOMÂÖÉÁ¥†
        this.elements = {};
        
        // ‰∫ã‰ª∂Â§ÑÁêÜÂô®
        this.handlers = {};
        
        // ÂàùÂßãÂåñ
        this.init();
    }
    
    // ÂàùÂßãÂåñ
    async init() {
        try {
            App.log('StudentManager ÂàùÂßãÂåñÂºÄÂßã...');
            
            // ÁºìÂ≠òDOMÂÖÉÁ¥†
            this.cacheElements();
            
            // ÁªëÂÆö‰∫ã‰ª∂
            this.bindEvents();
            
            // Âä†ËΩΩÂàùÂßãÊï∞ÊçÆ
            await this.loadStudents();
            
            // Âä†ËΩΩÁªüËÆ°‰ø°ÊÅØ
            await this.loadStatistics();
            
            App.log('StudentManager ÂàùÂßãÂåñÂÆåÊàê');
            
        } catch (error) {
            App.error('StudentManager ÂàùÂßãÂåñÂ§±Ë¥•:', error);
        }
    }
    
    // ÁºìÂ≠òDOMÂÖÉÁ¥†
    cacheElements() {
        this.elements = {
            // ÊêúÁ¥¢ÂíåËøáÊª§
            searchInput: document.getElementById('searchInput'),
            searchBtn: document.getElementById('searchBtn'),
            clearSearchBtn: document.getElementById('clearSearchBtn'),
            gradeFilter: document.getElementById('gradeFilter'),
            majorFilter: document.getElementById('majorFilter'),
            statusFilter: document.getElementById('statusFilter'),
            resetFilters: document.getElementById('resetFilters'),
            
            // Ë°®Ê†ºÂíåÂàóË°®
            studentTableBody: document.getElementById('studentTableBody'),
            studentCardContainer: document.getElementById('studentCardContainer'),
            loadingIndicator: document.getElementById('loadingIndicator'),
            emptyState: document.getElementById('emptyState'),
            studentCount: document.getElementById('studentCount'),
            
            // ÂàÜÈ°µ
            pagination: document.getElementById('pagination'),
            pageStart: document.getElementById('pageStart'),
            pageEnd: document.getElementById('pageEnd'),
            totalCount: document.getElementById('totalCount'),
            
            // ËßÜÂõæÂàáÊç¢
            tableView: document.getElementById('tableView'),
            cardView: document.getElementById('cardView'),
            tableViewContainer: document.getElementById('tableViewContainer'),
            cardViewContainer: document.getElementById('cardViewContainer'),
            
            // ÊâπÈáèÊìç‰Ωú
            selectAll: document.getElementById('selectAll'),
            batchToolbar: document.getElementById('batchToolbar'),
            selectedCount: document.getElementById('selectedCount'),
            batchActivateBtn: document.getElementById('batchActivateBtn'),
            batchDeactivateBtn: document.getElementById('batchDeactivateBtn'),
            batchDeleteBtn: document.getElementById('batchDeleteBtn'),
            cancelBatchBtn: document.getElementById('cancelBatchBtn'),
            
            // Ê®°ÊÄÅÊ°Ü
            addStudentModal: document.getElementById('addStudentModal'),
            studentForm: document.getElementById('studentForm'),
            saveStudentBtn: document.getElementById('saveStudentBtn'),
            
            // ÂÖ∂‰ªñÊåâÈíÆ
            refreshBtn: document.getElementById('refreshBtn'),
            importBtn: document.getElementById('importBtn'),
            exportBtn: document.getElementById('exportBtn')
        };
    }
    
    // ÁªëÂÆö‰∫ã‰ª∂
    bindEvents() {
        // ÊêúÁ¥¢‰∫ã‰ª∂
        if (this.elements.searchInput) {
            this.handlers.search = App.debounce(this.handleSearch.bind(this), 300);
            this.elements.searchInput.addEventListener('input', this.handlers.search);
            this.elements.searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    this.handleSearch();
                }
            });
        }
        
        if (this.elements.searchBtn) {
            this.elements.searchBtn.addEventListener('click', this.handleSearch.bind(this));
        }
        
        if (this.elements.clearSearchBtn) {
            this.elements.clearSearchBtn.addEventListener('click', this.clearSearch.bind(this));
        }
        
        // ËøáÊª§Âô®‰∫ã‰ª∂
        [this.elements.gradeFilter, this.elements.majorFilter, this.elements.statusFilter].forEach(filter => {
            if (filter) {
                filter.addEventListener('change', this.handleFilterChange.bind(this));
            }
        });
        
        if (this.elements.resetFilters) {
            this.elements.resetFilters.addEventListener('click', this.resetFilters.bind(this));
        }
        
        // ËßÜÂõæÂàáÊç¢
        if (this.elements.tableView) {
            this.elements.tableView.addEventListener('change', () => {
                this.switchView('table');
            });
        }
        
        if (this.elements.cardView) {
            this.elements.cardView.addEventListener('change', () => {
                this.switchView('card');
            });
        }
        
        // ÂÖ®ÈÄâ
        if (this.elements.selectAll) {
            this.elements.selectAll.addEventListener('change', this.handleSelectAll.bind(this));
        }
        
        // ÊâπÈáèÊìç‰Ωú
        if (this.elements.batchActivateBtn) {
            this.elements.batchActivateBtn.addEventListener('click', () => {
                this.handleBatchOperation('activate');
            });
        }
        
        if (this.elements.batchDeactivateBtn) {
            this.elements.batchDeactivateBtn.addEventListener('click', () => {
                this.handleBatchOperation('deactivate');
            });
        }
        
        if (this.elements.batchDeleteBtn) {
            this.elements.batchDeleteBtn.addEventListener('click', () => {
                this.handleBatchOperation('delete');
            });
        }
        
        if (this.elements.cancelBatchBtn) {
            this.elements.cancelBatchBtn.addEventListener('click', this.cancelBatchSelection.bind(this));
        }
        
        // Ë°®ÂçïÊèê‰∫§
        if (this.elements.saveStudentBtn) {
            this.elements.saveStudentBtn.addEventListener('click', this.handleSaveStudent.bind(this));
        }
        
        // ÂÖ∂‰ªñÊåâÈíÆ
        if (this.elements.refreshBtn) {
            this.elements.refreshBtn.addEventListener('click', this.refresh.bind(this));
        }
        
        if (this.elements.importBtn) {
            this.elements.importBtn.addEventListener('click', this.showImportModal.bind(this));
        }
        
        if (this.elements.exportBtn) {
            this.elements.exportBtn.addEventListener('click', this.handleExport.bind(this));
        }
        
        // ÊéíÂ∫è‰∫ã‰ª∂
        document.addEventListener('click', (e) => {
            if (e.target.closest('.sort-link')) {
                e.preventDefault();
                const sortBy = e.target.closest('.sort-link').dataset.sort;
                this.handleSort(sortBy);
            }
        });
        
        // Ê®°ÊÄÅÊ°Ü‰∫ã‰ª∂
        if (this.elements.addStudentModal) {
            this.elements.addStudentModal.addEventListener('hidden.bs.modal', () => {
                this.resetForm();
            });
        }
    }
    
    // Âä†ËΩΩÂ≠¶ÁîüÂàóË°®
    async loadStudents(showLoading = true) {
        try {
            if (showLoading) {
                this.showLoading();
            }
            
            const params = {
                page: this.currentPage,
                page_size: this.pageSize,
                sort_by: this.sortBy,
                sort_order: this.sortOrder,
                ...this.filters
            };
            
            const response = await studentAPI.getAll(params);
            
            if (response.success) {
                this.students = response.data.students || [];
                this.totalCount = response.data.total || 0;
                
                this.renderStudents();
                this.renderPagination();
                this.updateStatistics();
            } else {
                throw new Error(response.message || 'Âä†ËΩΩÂ≠¶ÁîüÂàóË°®Â§±Ë¥•');
            }
            
        } catch (error) {
            App.error('Âä†ËΩΩÂ≠¶ÁîüÂàóË°®Â§±Ë¥•:', error);
            App.showError(error.message);
            this.showEmptyState();
        } finally {
            this.hideLoading();
        }
    }
    
    // Ê∏≤ÊüìÂ≠¶ÁîüÂàóË°®
    renderStudents() {
        if (this.students.length === 0) {
            this.showEmptyState();
            return;
        }
        
        this.hideEmptyState();
        
        // Ê†πÊçÆÂΩìÂâçËßÜÂõæÊ®°ÂºèÊ∏≤Êüì
        if (this.elements.tableView && this.elements.tableView.checked) {
            this.renderTableView();
        } else {
            this.renderCardView();
        }
        
        // Êõ¥Êñ∞ËÆ°Êï∞
        if (this.elements.studentCount) {
            this.elements.studentCount.textContent = this.totalCount;
        }
    }
    
    // Ê∏≤ÊüìË°®Ê†ºËßÜÂõæ
    renderTableView() {
        if (!this.elements.studentTableBody) return;
        
        const tbody = this.elements.studentTableBody;
        tbody.innerHTML = '';
        
        this.students.forEach(student => {
            const row = this.createTableRow(student);
            tbody.appendChild(row);
        });
    }
    
    // ÂàõÂª∫Ë°®Ê†ºË°å
    createTableRow(student) {
        const row = document.createElement('tr');
        row.dataset.studentId = student.id;
        
        if (this.selectedStudents.has(student.id)) {
            row.classList.add('selected');
        }
        
        row.innerHTML = `
            <td>
                <input type="checkbox" class="form-check-input student-checkbox" 
                       value="${student.id}" ${this.selectedStudents.has(student.id) ? 'checked' : ''}>
            </td>
            <td>
                <img src="${student.avatar || '/static/images/default-avatar.png'}" 
                     alt="${student.name}" class="avatar rounded-circle">
            </td>
            <td>
                <div class="fw-bold">${this.escapeHtml(student.name)}</div>
                <small class="text-muted">${student.student_id || ''}</small>
            </td>
            <td>${student.age || '-'}</td>
            <td>
                <span class="badge bg-${student.gender === 'Áî∑' ? 'primary' : 'pink'}">
                    ${student.gender || '-'}
                </span>
            </td>
            <td>
                <a href="mailto:${student.email}" class="text-decoration-none">
                    ${this.escapeHtml(student.email)}
                </a>
            </td>
            <td>${this.escapeHtml(student.major || '-')}</td>
            <td>
                <span class="badge bg-info">${student.grade || '-'}</span>
            </td>
            <td>
                <span class="status-indicator ${student.status === 1 ? 'active' : 'inactive'}"></span>
                <span class="badge status-badge ${student.status === 1 ? 'status-active' : 'status-inactive'}">
                    ${student.status === 1 ? 'Ê≠£Â∏∏' : 'Á¶ÅÁî®'}
                </span>
            </td>
            <td>
                <small class="text-muted">
                    ${App.formatDate(student.created_at, 'YYYY-MM-DD')}
                </small>
            </td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-outline-primary" 
                            onclick="StudentManager.showStudentDetail(${student.id})" 
                            title="Êü•ÁúãËØ¶ÊÉÖ">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-secondary" 
                            onclick="StudentManager.showEditModal(${student.id})" 
                            title="ÁºñËæë">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-${student.status === 1 ? 'warning' : 'success'}" 
                            onclick="StudentManager.toggleStatus(${student.id})" 
                            title="${student.status === 1 ? 'Á¶ÅÁî®' : 'ÊøÄÊ¥ª'}">
                        <i class="fas fa-${student.status === 1 ? 'ban' : 'check'}"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-danger" 
                            onclick="StudentManager.deleteStudent(${student.id})" 
                            title="Âà†Èô§">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </td>
        `;
        
        // ÁªëÂÆöÂ§çÈÄâÊ°Ü‰∫ã‰ª∂
        const checkbox = row.querySelector('.student-checkbox');
        checkbox.addEventListener('change', (e) => {
            this.handleStudentSelect(student.id, e.target.checked);
        });
        
        return row;
    }
    
    // Ê∏≤ÊüìÂç°ÁâáËßÜÂõæ
    renderCardView() {
        if (!this.elements.studentCardContainer) return;
        
        const container = this.elements.studentCardContainer;
        container.innerHTML = '';
        
        this.students.forEach(student => {
            const card = this.createStudentCard(student);
            container.appendChild(card);
        });
    }
    
    // ÂàõÂª∫Â≠¶ÁîüÂç°Áâá
    createStudentCard(student) {
        const col = document.createElement('div');
        col.className = 'col-md-6 col-lg-4';
        
        col.innerHTML = `
            <div class="card student-card h-100" data-student-id="${student.id}">
                <div class="card-body text-center">
                    <div class="position-relative d-inline-block mb-3">
                        <img src="${student.avatar || '/static/images/default-avatar.png'}" 
                             alt="${student.name}" class="student-avatar rounded-circle">
                        <span class="position-absolute bottom-0 end-0 status-indicator ${student.status === 1 ? 'active' : 'inactive'}"></span>
                    </div>
                    
                    <h6 class="card-title mb-2">${this.escapeHtml(student.name)}</h6>
                    
                    <div class="student-info text-start">
                        <p><i class="fas fa-envelope me-2"></i>${this.escapeHtml(student.email)}</p>
                        <p><i class="fas fa-graduation-cap me-2"></i>${this.escapeHtml(student.major || '-')}</p>
                        <p><i class="fas fa-calendar me-2"></i>${student.grade || '-'}Á∫ß</p>
                        <p><i class="fas fa-birthday-cake me-2"></i>${student.age || '-'}Â≤Å</p>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <div class="form-check">
                            <input class="form-check-input student-checkbox" type="checkbox" 
                                   value="${student.id}" ${this.selectedStudents.has(student.id) ? 'checked' : ''}>
                            <label class="form-check-label">ÈÄâÊã©</label>
                        </div>
                        
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" 
                                    onclick="StudentManager.showStudentDetail(${student.id})" 
                                    title="Êü•ÁúãËØ¶ÊÉÖ">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline-secondary" 
                                    onclick="StudentManager.showEditModal(${student.id})" 
                                    title="ÁºñËæë">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" 
                                    onclick="StudentManager.deleteStudent(${student.id})" 
                                    title="Âà†Èô§">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // ÁªëÂÆöÂ§çÈÄâÊ°Ü‰∫ã‰ª∂
        const checkbox = col.querySelector('.student-checkbox');
        checkbox.addEventListener('change', (e) => {
            this.handleStudentSelect(student.id, e.target.checked);
        });
        
        // ÁªëÂÆöÂç°ÁâáÁÇπÂáª‰∫ã‰ª∂
        const card = col.querySelector('.student-card');
        card.addEventListener('click', (e) => {
            if (!e.target.closest('button') && !e.target.closest('.form-check')) {
                this.showStudentDetail(student.id);
            }
        });
        
        return col;
    }
    
    // Â§ÑÁêÜÊêúÁ¥¢
    async handleSearch() {
        const query = this.elements.searchInput?.value?.trim() || '';
        
        // ÈáçÁΩÆÂà∞Á¨¨‰∏ÄÈ°µ
        this.currentPage = 1;
        
        // Â¶ÇÊûúÊúâÊêúÁ¥¢ËØçÔºå‰ΩøÁî®ÊêúÁ¥¢API
        if (query) {
            try {
                this.showLoading();
                
                const response = await studentAPI.search(query, this.filters);
                
                if (response.success) {
                    this.students = response.data || [];
                    this.totalCount = this.students.length;
                    
                    this.renderStudents();
                    this.renderPagination();
                } else {
                    throw new Error(response.message || 'ÊêúÁ¥¢Â§±Ë¥•');
                }
                
            } catch (error) {
                App.error('ÊêúÁ¥¢Â§±Ë¥•:', error);
                App.showError(error.message);
            } finally {
                this.hideLoading();
            }
        } else {
            // Ê≤°ÊúâÊêúÁ¥¢ËØçÔºåÂä†ËΩΩÊâÄÊúâÊï∞ÊçÆ
            await this.loadStudents();
        }
    }
    
    // Ê∏ÖÈô§ÊêúÁ¥¢
    clearSearch() {
        if (this.elements.searchInput) {
            this.elements.searchInput.value = '';
        }
        this.handleSearch();
    }
    
    // Â§ÑÁêÜËøáÊª§Âô®ÂèòÂåñ
    handleFilterChange() {
        this.filters = {};
        
        // Êî∂ÈõÜËøáÊª§Êù°‰ª∂
        if (this.elements.gradeFilter?.value) {
            this.filters.grade = this.elements.gradeFilter.value;
        }
        
        if (this.elements.majorFilter?.value) {
            this.filters.major = this.elements.majorFilter.value;
        }
        
        if (this.elements.statusFilter?.value !== '') {
            this.filters.status = this.elements.statusFilter.value;
        }
        
        // ÈáçÁΩÆÂà∞Á¨¨‰∏ÄÈ°µ
        this.currentPage = 1;
        
        // ÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆ
        this.loadStudents();
    }
    
    // ÈáçÁΩÆËøáÊª§Âô®
    resetFilters() {
        this.filters = {};
        
        // ÈáçÁΩÆË°®Âçï
        if (this.elements.gradeFilter) this.elements.gradeFilter.value = '';
        if (this.elements.majorFilter) this.elements.majorFilter.value = '';
        if (this.elements.statusFilter) this.elements.statusFilter.value = '';
        
        // ÈáçÁΩÆÂà∞Á¨¨‰∏ÄÈ°µ
        this.currentPage = 1;
        
        // ÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆ
        this.loadStudents();
    }
    
    // Â§ÑÁêÜÊéíÂ∫è
    handleSort(sortBy) {
        if (this.sortBy === sortBy) {
            // ÂàáÊç¢ÊéíÂ∫èÈ°∫Â∫è
            this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';
        } else {
            // Êñ∞ÁöÑÊéíÂ∫èÂ≠óÊÆµ
            this.sortBy = sortBy;
            this.sortOrder = 'asc';
        }
        
        // Êõ¥Êñ∞ÊéíÂ∫èÂõæÊ†á
        this.updateSortIcons();
        
        // ÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆ
        this.loadStudents();
    }
    
    // Êõ¥Êñ∞ÊéíÂ∫èÂõæÊ†á
    updateSortIcons() {
        document.querySelectorAll('.sort-link').forEach(link => {
            const icon = link.querySelector('i');
            const sortBy = link.dataset.sort;
            
            link.classList.remove('active');
            icon.className = 'fas fa-sort';
            
            if (sortBy === this.sortBy) {
                link.classList.add('active');
                icon.className = `fas fa-sort-${this.sortOrder === 'asc' ? 'up' : 'down'}`;
            }
        });
    }
    
    // ÂàáÊç¢ËßÜÂõæÊ®°Âºè
    switchView(mode) {
        if (mode === 'table') {
            this.elements.tableViewContainer?.classList.remove('d-none');
            this.elements.cardViewContainer?.classList.add('d-none');
        } else {
            this.elements.tableViewContainer?.classList.add('d-none');
            this.elements.cardViewContainer?.classList.remove('d-none');
        }
        
        // ÈáçÊñ∞Ê∏≤Êüì
        this.renderStudents();
    }
    
    // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
    showLoading() {
        if (this.elements.loadingIndicator) {
            this.elements.loadingIndicator.classList.remove('d-none');
        }
        
        if (this.elements.studentTableBody) {
            this.elements.studentTableBody.style.opacity = '0.5';
        }
        
        if (this.elements.studentCardContainer) {
            this.elements.studentCardContainer.style.opacity = '0.5';
        }
    }
    
    // ÈöêËóèÂä†ËΩΩÁä∂ÊÄÅ
    hideLoading() {
        if (this.elements.loadingIndicator) {
            this.elements.loadingIndicator.classList.add('d-none');
        }
        
        if (this.elements.studentTableBody) {
            this.elements.studentTableBody.style.opacity = '1';
        }
        
        if (this.elements.studentCardContainer) {
            this.elements.studentCardContainer.style.opacity = '1';
        }
    }
    
    // ÊòæÁ§∫Á©∫Áä∂ÊÄÅ
    showEmptyState() {
        if (this.elements.emptyState) {
            this.elements.emptyState.classList.remove('d-none');
        }
        
        if (this.elements.tableViewContainer) {
            this.elements.tableViewContainer.classList.add('d-none');
        }
        
        if (this.elements.cardViewContainer) {
            this.elements.cardViewContainer.classList.add('d-none');
        }
    }
    
    // ÈöêËóèÁ©∫Áä∂ÊÄÅ
    hideEmptyState() {
        if (this.elements.emptyState) {
            this.elements.emptyState.classList.add('d-none');
        }
        
        if (this.elements.tableViewContainer) {
            this.elements.tableViewContainer.classList.remove('d-none');
        }
        
        if (this.elements.cardViewContainer) {
            this.elements.cardViewContainer.classList.remove('d-none');
        }
    }
    
    // HTMLËΩ¨‰πâ
    escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    // Âà∑Êñ∞Êï∞ÊçÆ
    async refresh() {
        this.currentPage = 1;
        await this.loadStudents();
        App.showSuccess('Êï∞ÊçÆÂ∑≤Âà∑Êñ∞');
    }
}

// ÂàõÂª∫ÂÖ®Â±ÄÂÆû‰æã
window.StudentManager = new StudentManager();
```

## 8.4 ÈÄöÁü•ÊúçÂä°

### ÈÄöÁü•Á≥ªÁªü

**Êñá‰ª∂Ë∑ØÂæÑÔºö** `static/js/services/notification.js`

```javascript
/**
 * ÈÄöÁü•ÊúçÂä°
 * Áªü‰∏ÄÂ§ÑÁêÜÂ∫îÁî®ÂÜÖÁöÑÈÄöÁü•Ê∂àÊÅØ
 */

class NotificationService {
    constructor() {
        this.container = null;
        this.notifications = new Map();
        this.defaultOptions = {
            duration: 5000,
            position: 'top-right',
            showProgress: true,
            allowClose: true,
            pauseOnHover: true
        };
        
        this.init();
    }
    
    // ÂàùÂßãÂåñÈÄöÁü•Á≥ªÁªü
    init() {
        this.createContainer();
        this.bindEvents();
    }
    
    // ÂàõÂª∫ÈÄöÁü•ÂÆπÂô®
    createContainer() {
        this.container = document.createElement('div');
        this.container.id = 'notification-container';
        this.container.className = 'notification-container';
        document.body.appendChild(this.container);
    }
    
    // ÁªëÂÆö‰∫ã‰ª∂
    bindEvents() {
        // ÁõëÂê¨È°µÈù¢ÂèØËßÅÊÄßÂèòÂåñ
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'hidden') {
                this.pauseAll();
            } else {
                this.resumeAll();
            }
        });
    }
    
    // ÊòæÁ§∫ÈÄöÁü•
    show(message, type = 'info', options = {}) {
        const config = { ...this.defaultOptions, ...options };
        const id = this.generateId();
        
        const notification = this.createNotification(id, message, type, config);
        this.container.appendChild(notification);
        
        // Ê∑ªÂä†Âà∞ÁÆ°ÁêÜÂàóË°®
        this.notifications.set(id, {
            element: notification,
            config,
            timer: null,
            paused: false
        });
        
        // ËÆæÁΩÆËá™Âä®ÂÖ≥Èó≠
        if (config.duration > 0) {
            this.setAutoClose(id, config.duration);
        }
        
        // Ëß¶ÂèëÊòæÁ§∫Âä®Áîª
        requestAnimationFrame(() => {
            notification.classList.add('show');
        });
        
        return id;
    }
    
    // ÂàõÂª∫ÈÄöÁü•ÂÖÉÁ¥†
    createNotification(id, message, type, config) {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.dataset.id = id;
        
        const icon = this.getTypeIcon(type);
        const progressBar = config.showProgress ? '<div class="notification-progress"></div>' : '';
        const closeButton = config.allowClose ? '<button class="notification-close" aria-label="ÂÖ≥Èó≠"><i class="fas fa-times"></i></button>' : '';
        
        notification.innerHTML = `
            <div class="notification-content">
                <div class="notification-icon">
                    <i class="${icon}"></i>
                </div>
                <div class="notification-message">${message}</div>
                ${closeButton}
            </div>
            ${progressBar}
        `;
        
        // ÁªëÂÆö‰∫ã‰ª∂
        this.bindNotificationEvents(notification, id, config);
        
        return notification;
    }
    
    // Ëé∑ÂèñÁ±ªÂûãÂõæÊ†á
    getTypeIcon(type) {
        const icons = {
            success: 'fas fa-check-circle',
            error: 'fas fa-exclamation-circle',
            warning: 'fas fa-exclamation-triangle',
            info: 'fas fa-info-circle'
        };
        return icons[type] || icons.info;
    }
    
    // ÁªëÂÆöÈÄöÁü•‰∫ã‰ª∂
    bindNotificationEvents(notification, id, config) {
        // ÂÖ≥Èó≠ÊåâÈíÆ
        const closeBtn = notification.querySelector('.notification-close');
        if (closeBtn) {
            closeBtn.addEventListener('click', () => {
                this.close(id);
            });
        }
        
        // Èº†Ê†áÊÇ¨ÂÅúÊöÇÂÅú
        if (config.pauseOnHover) {
            notification.addEventListener('mouseenter', () => {
                this.pause(id);
            });
            
            notification.addEventListener('mouseleave', () => {
                this.resume(id);
            });
        }
        
        // ÁÇπÂáªÂÖ≥Èó≠
        notification.addEventListener('click', (e) => {
            if (!e.target.closest('.notification-close')) {
                this.close(id);
            }
        });
    }
    
    // ËÆæÁΩÆËá™Âä®ÂÖ≥Èó≠
    setAutoClose(id, duration) {
        const notificationData = this.notifications.get(id);
        if (!notificationData) return;
        
        const progressBar = notificationData.element.querySelector('.notification-progress');
        
        if (progressBar) {
            progressBar.style.animationDuration = `${duration}ms`;
            progressBar.classList.add('running');
        }
        
        notificationData.timer = setTimeout(() => {
            this.close(id);
        }, duration);
    }
    
    // ÊöÇÂÅúÈÄöÁü•
    pause(id) {
        const notificationData = this.notifications.get(id);
        if (!notificationData || notificationData.paused) return;
        
        notificationData.paused = true;
        
        if (notificationData.timer) {
            clearTimeout(notificationData.timer);
        }
        
        const progressBar = notificationData.element.querySelector('.notification-progress');
        if (progressBar) {
            progressBar.style.animationPlayState = 'paused';
        }
    }
    
    // ÊÅ¢Â§çÈÄöÁü•
    resume(id) {
        const notificationData = this.notifications.get(id);
        if (!notificationData || !notificationData.paused) return;
        
        notificationData.paused = false;
        
        const progressBar = notificationData.element.querySelector('.notification-progress');
        if (progressBar) {
            progressBar.style.animationPlayState = 'running';
            
            // ËÆ°ÁÆóÂâ©‰ΩôÊó∂Èó¥
            const computedStyle = window.getComputedStyle(progressBar);
            const animationDuration = parseFloat(computedStyle.animationDuration) * 1000;
            const animationDelay = parseFloat(computedStyle.animationDelay) * 1000;
            const elapsedTime = Date.now() - (notificationData.startTime || Date.now());
            const remainingTime = Math.max(0, animationDuration - elapsedTime);
            
            if (remainingTime > 0) {
                notificationData.timer = setTimeout(() => {
                    this.close(id);
                }, remainingTime);
            }
        }
    }
    
    // ÂÖ≥Èó≠ÈÄöÁü•
    close(id) {
        const notificationData = this.notifications.get(id);
        if (!notificationData) return;
        
        const { element, timer } = notificationData;
        
        // Ê∏ÖÈô§ÂÆöÊó∂Âô®
        if (timer) {
            clearTimeout(timer);
        }
        
        // Ê∑ªÂä†ÂÖ≥Èó≠Âä®Áîª
        element.classList.add('closing');
        
        // Âä®ÁîªÁªìÊùüÂêéÁßªÈô§ÂÖÉÁ¥†
        setTimeout(() => {
            if (element.parentNode) {
                element.parentNode.removeChild(element);
            }
            this.notifications.delete(id);
        }, 300);
    }
    
    // ÊöÇÂÅúÊâÄÊúâÈÄöÁü•
    pauseAll() {
        this.notifications.forEach((_, id) => {
            this.pause(id);
        });
    }
    
    // ÊÅ¢Â§çÊâÄÊúâÈÄöÁü•
    resumeAll() {
        this.notifications.forEach((_, id) => {
            this.resume(id);
        });
    }
    
    // Ê∏ÖÈô§ÊâÄÊúâÈÄöÁü•
    clearAll() {
        this.notifications.forEach((_, id) => {
            this.close(id);
        });
    }
    
    // ÁîüÊàêÂîØ‰∏ÄID
    generateId() {
        return 'notification_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }
    
    // ‰æøÊç∑ÊñπÊ≥ï
    success(message, options = {}) {
        return this.show(message, 'success', options);
    }
    
    error(message, options = {}) {
        return this.show(message, 'error', { duration: 8000, ...options });
    }
    
    warning(message, options = {}) {
        return this.show(message, 'warning', { duration: 6000, ...options });
    }
    
    info(message, options = {}) {
        return this.show(message, 'info', options);
    }
}

// ÂàõÂª∫ÂÖ®Â±ÄÂÆû‰æã
window.NotificationService = new NotificationService();
```

## 8.5 Â∑•ÂÖ∑ÂáΩÊï∞

### È™åËØÅÂ∑•ÂÖ∑

**Êñá‰ª∂Ë∑ØÂæÑÔºö** `static/js/utils/validation.js`

```javascript
/**
 * È™åËØÅÂ∑•ÂÖ∑ÂáΩÊï∞
 * Êèê‰æõÂêÑÁßçÊï∞ÊçÆÈ™åËØÅÂäüËÉΩ
 */

class ValidationUtils {
    // È™åËØÅÈÇÆÁÆ±
    static isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    // È™åËØÅÊâãÊú∫Âè∑
    static isValidPhone(phone) {
        const phoneRegex = /^1[3-9]\d{9}$/;
        return phoneRegex.test(phone);
    }
    
    // È™åËØÅË∫´‰ªΩËØÅÂè∑
    static isValidIdCard(idCard) {
        const idCardRegex = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
        return idCardRegex.test(idCard);
    }
    
    // È™åËØÅÂ≠¶Âè∑
    static isValidStudentId(studentId) {
        const studentIdRegex = /^\d{8,12}$/;
        return studentIdRegex.test(studentId);
    }
    
    // È™åËØÅÂØÜÁ†ÅÂº∫Â∫¶
    static validatePassword(password) {
        const result = {
            isValid: false,
            score: 0,
            feedback: []
        };
        
        if (!password) {
            result.feedback.push('ÂØÜÁ†Å‰∏çËÉΩ‰∏∫Á©∫');
            return result;
        }
        
        if (password.length < 8) {
            result.feedback.push('ÂØÜÁ†ÅÈïøÂ∫¶Ëá≥Â∞ë8‰Ωç');
        } else {
            result.score += 1;
        }
        
        if (!/[a-z]/.test(password)) {
            result.feedback.push('ÂØÜÁ†ÅÈúÄÂåÖÂê´Â∞èÂÜôÂ≠óÊØç');
        } else {
            result.score += 1;
        }
        
        if (!/[A-Z]/.test(password)) {
            result.feedback.push('ÂØÜÁ†ÅÈúÄÂåÖÂê´Â§ßÂÜôÂ≠óÊØç');
        } else {
            result.score += 1;
        }
        
        if (!/\d/.test(password)) {
            result.feedback.push('ÂØÜÁ†ÅÈúÄÂåÖÂê´Êï∞Â≠ó');
        } else {
            result.score += 1;
        }
        
        if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
            result.feedback.push('ÂØÜÁ†ÅÈúÄÂåÖÂê´ÁâπÊÆäÂ≠óÁ¨¶');
        } else {
            result.score += 1;
        }
        
        result.isValid = result.score >= 3 && result.feedback.length === 0;
        
        return result;
    }
    
    // È™åËØÅÂπ¥ÈæÑ
    static isValidAge(age) {
        return Number.isInteger(age) && age >= 16 && age <= 30;
    }
    
    // È™åËØÅÂøÖÂ°´Â≠óÊÆµ
    static isRequired(value) {
        if (typeof value === 'string') {
            return value.trim().length > 0;
        }
        return value !== null && value !== undefined;
    }
    
    // È™åËØÅÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶
    static isValidLength(str, min = 0, max = Infinity) {
        if (typeof str !== 'string') return false;
        const length = str.trim().length;
        return length >= min && length <= max;
    }
    
    // È™åËØÅÊï∞Â≠óËåÉÂõ¥
    static isInRange(num, min = -Infinity, max = Infinity) {
        return typeof num === 'number' && num >= min && num <= max;
    }
    
    // È™åËØÅÊñá‰ª∂Á±ªÂûã
    static isValidFileType(file, allowedTypes) {
        if (!file || !allowedTypes) return false;
        return allowedTypes.includes(file.type);
    }
    
    // È™åËØÅÊñá‰ª∂Â§ßÂ∞è
    static isValidFileSize(file, maxSize) {
        if (!file) return false;
        return file.size <= maxSize;
    }
    
    // Ë°®ÂçïÈ™åËØÅ
    static validateForm(formData, rules) {
        const errors = {};
        
        Object.keys(rules).forEach(field => {
            const value = formData[field];
            const fieldRules = rules[field];
            const fieldErrors = [];
            
            fieldRules.forEach(rule => {
                if (rule.required && !this.isRequired(value)) {
                    fieldErrors.push(rule.message || `${field}ÊòØÂøÖÂ°´È°π`);
                    return;
                }
                
                if (value && rule.type) {
                    switch (rule.type) {
                        case 'email':
                            if (!this.isValidEmail(value)) {
                                fieldErrors.push(rule.message || 'ÈÇÆÁÆ±Ê†ºÂºè‰∏çÊ≠£Á°Æ');
                            }
                            break;
                        case 'phone':
                            if (!this.isValidPhone(value)) {
                                fieldErrors.push(rule.message || 'ÊâãÊú∫Âè∑Ê†ºÂºè‰∏çÊ≠£Á°Æ');
                            }
                            break;
                        case 'age':
                            if (!this.isValidAge(parseInt(value))) {
                                fieldErrors.push(rule.message || 'Âπ¥ÈæÑÂøÖÈ°ªÂú®16-30‰πãÈó¥');
                            }
                            break;
                    }
                }
                
                if (value && rule.minLength && !this.isValidLength(value, rule.minLength)) {
                    fieldErrors.push(rule.message || `${field}ÈïøÂ∫¶‰∏çËÉΩÂ∞ë‰∫é${rule.minLength}‰∏™Â≠óÁ¨¶`);
                }
                
                if (value && rule.maxLength && !this.isValidLength(value, 0, rule.maxLength)) {
                    fieldErrors.push(rule.message || `${field}ÈïøÂ∫¶‰∏çËÉΩË∂ÖËøá${rule.maxLength}‰∏™Â≠óÁ¨¶`);
                }
                
                if (value && rule.pattern && !rule.pattern.test(value)) {
                    fieldErrors.push(rule.message || `${field}Ê†ºÂºè‰∏çÊ≠£Á°Æ`);
                }
            });
            
            if (fieldErrors.length > 0) {
                errors[field] = fieldErrors;
            }
        });
        
        return {
            isValid: Object.keys(errors).length === 0,
            errors
        };
    }
}

// ÂÖ®Â±ÄÊö¥Èú≤
window.ValidationUtils = ValidationUtils;
```

## 8.6 ÊÄßËÉΩ‰ºòÂåñ

### ÁºìÂ≠òÁ≠ñÁï•

```javascript
// ÂÆûÁé∞Êô∫ËÉΩÁºìÂ≠ò
class CacheManager {
    constructor() {
        this.cache = new Map();
        this.maxSize = 100;
        this.ttl = 5 * 60 * 1000; // 5ÂàÜÈíü
    }
    
    set(key, value, customTTL = null) {
        const expiry = Date.now() + (customTTL || this.ttl);
        
        if (this.cache.size >= this.maxSize) {
            this.evictOldest();
        }
        
        this.cache.set(key, {
            value,
            expiry,
            accessCount: 0,
            lastAccess: Date.now()
        });
    }
    
    get(key) {
        const item = this.cache.get(key);
        
        if (!item) return null;
        
        if (Date.now() > item.expiry) {
            this.cache.delete(key);
            return null;
        }
        
        item.accessCount++;
        item.lastAccess = Date.now();
        
        return item.value;
    }
    
    evictOldest() {
        let oldestKey = null;
        let oldestTime = Infinity;
        
        for (const [key, item] of this.cache) {
            if (item.lastAccess < oldestTime) {
                oldestTime = item.lastAccess;
                oldestKey = key;
            }
        }
        
        if (oldestKey) {
            this.cache.delete(oldestKey);
        }
    }
}
```

### Èò≤ÊäñÂíåËäÇÊµÅ

```javascript
// È´òÁ∫ßÈò≤ÊäñÂÆûÁé∞
function advancedDebounce(func, wait, options = {}) {
    let timeout;
    let lastArgs;
    let lastThis;
    let result;
    let lastCallTime;
    let lastInvokeTime = 0;
    
    const {
        leading = false,
        trailing = true,
        maxWait
    } = options;
    
    function invokeFunc(time) {
        const args = lastArgs;
        const thisArg = lastThis;
        
        lastArgs = lastThis = undefined;
        lastInvokeTime = time;
        result = func.apply(thisArg, args);
        return result;
    }
    
    function shouldInvoke(time) {
        const timeSinceLastCall = time - lastCallTime;
        const timeSinceLastInvoke = time - lastInvokeTime;
        
        return (lastCallTime === undefined ||
                timeSinceLastCall >= wait ||
                timeSinceLastCall < 0 ||
                (maxWait !== undefined && timeSinceLastInvoke >= maxWait));
    }
    
    function debounced(...args) {
        const time = Date.now();
        const isInvoking = shouldInvoke(time);
        
        lastArgs = args;
        lastThis = this;
        lastCallTime = time;
        
        if (isInvoking) {
            if (timeout === undefined) {
                return leadingEdge(lastCallTime);
            }
            if (maxWait) {
                timeout = setTimeout(timerExpired, wait);
                return invokeFunc(lastCallTime);
            }
        }
        
        if (timeout === undefined) {
            timeout = setTimeout(timerExpired, wait);
        }
        
        return result;
    }
    
    function leadingEdge(time) {
        lastInvokeTime = time;
        timeout = setTimeout(timerExpired, wait);
        return leading ? invokeFunc(time) : result;
    }
    
    function timerExpired() {
        const time = Date.now();
        if (shouldInvoke(time)) {
            return trailingEdge(time);
        }
        timeout = setTimeout(timerExpired, remainingWait(time));
    }
    
    function trailingEdge(time) {
        timeout = undefined;
        
        if (trailing && lastArgs) {
            return invokeFunc(time);
        }
        lastArgs = lastThis = undefined;
        return result;
    }
    
    function remainingWait(time) {
        const timeSinceLastCall = time - lastCallTime;
        const timeSinceLastInvoke = time - lastInvokeTime;
        const timeWaiting = wait - timeSinceLastCall;
        
        return maxWait !== undefined
            ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)
            : timeWaiting;
    }
    
    debounced.cancel = function() {
        if (timeout !== undefined) {
            clearTimeout(timeout);
        }
        lastInvokeTime = 0;
        lastArgs = lastCallTime = lastThis = timeout = undefined;
    };
    
    debounced.flush = function() {
        return timeout === undefined ? result : trailingEdge(Date.now());
    };
    
    return debounced;
}
```

## 8.7 ÈîôËØØÂ§ÑÁêÜÂíåË∞ÉËØï

### ÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜ

```javascript
// Áªü‰∏ÄÈîôËØØÂ§ÑÁêÜ
class ErrorHandler {
    static init() {
        // ÊçïËé∑Êú™Â§ÑÁêÜÁöÑÈîôËØØ
        window.addEventListener('error', this.handleError.bind(this));
        
        // ÊçïËé∑PromiseÊãíÁªù
        window.addEventListener('unhandledrejection', this.handlePromiseRejection.bind(this));
        
        // ÊçïËé∑ËµÑÊ∫êÂä†ËΩΩÈîôËØØ
        window.addEventListener('error', this.handleResourceError.bind(this), true);
    }
    
    static handleError(event) {
        const error = {
            message: event.message,
            filename: event.filename,
            lineno: event.lineno,
            colno: event.colno,
            stack: event.error?.stack,
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href
        };
        
        this.logError(error);
        this.reportError(error);
    }
    
    static handlePromiseRejection(event) {
        const error = {
            type: 'unhandledrejection',
            reason: event.reason,
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href
        };
        
        this.logError(error);
        this.reportError(error);
        
        // ÈòªÊ≠¢ÈªòËÆ§ÁöÑÊéßÂà∂Âè∞ÈîôËØØËæìÂá∫
        event.preventDefault();
    }
    
    static handleResourceError(event) {
        if (event.target !== window) {
            const error = {
                type: 'resource',
                element: event.target.tagName,
                source: event.target.src || event.target.href,
                timestamp: new Date().toISOString(),
                url: window.location.href
            };
            
            this.logError(error);
        }
    }
    
    static logError(error) {
        console.error('Â∫îÁî®ÈîôËØØ:', error);
        
        // Â≠òÂÇ®Âà∞Êú¨Âú∞Â≠òÂÇ®Áî®‰∫éË∞ÉËØï
        const errors = JSON.parse(localStorage.getItem('app_errors') || '[]');
        errors.push(error);
        
        // Âè™‰øùÁïôÊúÄËøë50‰∏™ÈîôËØØ
        if (errors.length > 50) {
            errors.splice(0, errors.length - 50);
        }
        
        localStorage.setItem('app_errors', JSON.stringify(errors));
    }
    
    static reportError(error) {
        // ÂèëÈÄÅÈîôËØØÊä•ÂëäÂà∞ÊúçÂä°Âô®
        if (window.AnalyticsService) {
            AnalyticsService.trackError(error);
        }
    }
    
    static getStoredErrors() {
        return JSON.parse(localStorage.getItem('app_errors') || '[]');
    }
    
    static clearStoredErrors() {
        localStorage.removeItem('app_errors');
    }
}

// ÂàùÂßãÂåñÈîôËØØÂ§ÑÁêÜ
ErrorHandler.init();
```

## 8.8 ÊÄªÁªì

Êú¨Á´†ËØ¶ÁªÜ‰ªãÁªç‰∫ÜJavaScript‰∫§‰∫íÈÄªËæëÁöÑÂºÄÂèëÔºåÂåÖÊã¨Ôºö

### Ê†∏ÂøÉÁâπÊÄß

1. **Ê®°ÂùóÂåñÊû∂ÊûÑ** - Ê∏ÖÊô∞ÁöÑ‰ª£Á†ÅÁªÑÁªáÁªìÊûÑ
2. **APIÂÆ¢Êà∑Á´Ø** - Áªü‰∏ÄÁöÑHTTPËØ∑Ê±ÇÂ§ÑÁêÜ
3. **ÁªÑ‰ª∂Á≥ªÁªü** - ÂèØÂ§çÁî®ÁöÑUIÁªÑ‰ª∂
4. **‰∫ã‰ª∂Á≥ªÁªü** - ÁÅµÊ¥ªÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÊú∫Âà∂
5. **Áä∂ÊÄÅÁÆ°ÁêÜ** - Â∫îÁî®Áä∂ÊÄÅÁöÑÁªü‰∏ÄÁÆ°ÁêÜ
6. **ÈîôËØØÂ§ÑÁêÜ** - ÂÆåÂñÑÁöÑÈîôËØØÊçïËé∑ÂíåÂ§ÑÁêÜ
7. **ÊÄßËÉΩ‰ºòÂåñ** - ÁºìÂ≠ò„ÄÅÈò≤Êäñ„ÄÅËäÇÊµÅÁ≠â‰ºòÂåñÊäÄÊúØ
8. **Áî®Êà∑‰ΩìÈ™å** - Âä†ËΩΩÁä∂ÊÄÅ„ÄÅÈÄöÁü•Á≥ªÁªüÁ≠â

### ÊúÄ‰Ω≥ÂÆûË∑µ

1. **‰ª£Á†ÅËßÑËåÉ** - Áªü‰∏ÄÁöÑÁºñÁ†ÅÈ£éÊ†ºÂíåÂëΩÂêçËßÑËåÉ
2. **ÈîôËØØÂ§ÑÁêÜ** - ÂÆåÂñÑÁöÑÈîôËØØÊçïËé∑ÂíåÁî®Êà∑ÂèãÂ•ΩÁöÑÈîôËØØÊèêÁ§∫
3. **ÊÄßËÉΩ‰ºòÂåñ** - ÂêàÁêÜ‰ΩøÁî®ÁºìÂ≠òÂíå‰ºòÂåñÊäÄÊúØ
4. **Áî®Êà∑‰ΩìÈ™å** - ÂìçÂ∫îÂºèËÆæËÆ°Âíå‰∫§‰∫íÂèçÈ¶à
5. **ÂèØÁª¥Êä§ÊÄß** - Ê®°ÂùóÂåñËÆæËÆ°ÂíåÊ∏ÖÊô∞ÁöÑ‰ª£Á†ÅÁªìÊûÑ
6. **ÂèØÊâ©Â±ïÊÄß** - ÁÅµÊ¥ªÁöÑÊû∂ÊûÑËÆæËÆ°

### ‰∏ã‰∏ÄÊ≠•

Âú®‰∏ã‰∏ÄÁ´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜÂ≠¶‰π†Â¶Ç‰ΩïËøõË°åÁ≥ªÁªüÊµãËØïÂíåÈÉ®ÁΩ≤ÔºåÁ°Æ‰øùÂ∫îÁî®ÁöÑË¥®ÈáèÂíåÁ®≥ÂÆöÊÄß„ÄÇ